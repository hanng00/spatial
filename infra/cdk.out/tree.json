{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.231.0"},"children":{"SpatialEcrStack":{"id":"SpatialEcrStack","path":"SpatialEcrStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.231.0"},"children":{"IngestionRepo":{"id":"IngestionRepo","path":"SpatialEcrStack/IngestionRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcrStack/IngestionRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"emptyOnDelete":true,"imageScanningConfiguration":{"scanOnPush":true},"lifecyclePolicy":{"lifecyclePolicyText":"{\"rules\":[{\"rulePriority\":1,\"description\":\"Keep only last 5 images\",\"selection\":{\"tagStatus\":\"any\",\"countType\":\"imageCountMoreThan\",\"countNumber\":5},\"action\":{\"type\":\"expire\"}}]}"},"repositoryName":"spatial/ingestion"}}}}},"TransformationsDbtRepo":{"id":"TransformationsDbtRepo","path":"SpatialEcrStack/TransformationsDbtRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcrStack/TransformationsDbtRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"emptyOnDelete":true,"imageScanningConfiguration":{"scanOnPush":true},"lifecyclePolicy":{"lifecyclePolicyText":"{\"rules\":[{\"rulePriority\":1,\"description\":\"Keep only last 5 images\",\"selection\":{\"tagStatus\":\"any\",\"countType\":\"imageCountMoreThan\",\"countNumber\":5},\"action\":{\"type\":\"expire\"}}]}"},"repositoryName":"spatial/transformations-dbt"}}}}},"DagsterRepo":{"id":"DagsterRepo","path":"SpatialEcrStack/DagsterRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcrStack/DagsterRepo/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"emptyOnDelete":true,"imageScanningConfiguration":{"scanOnPush":true},"lifecyclePolicy":{"lifecyclePolicyText":"{\"rules\":[{\"rulePriority\":1,\"description\":\"Keep only last 5 images\",\"selection\":{\"tagStatus\":\"any\",\"countType\":\"imageCountMoreThan\",\"countNumber\":5},\"action\":{\"type\":\"expire\"}}]}"},"repositoryName":"spatial/dagster"}}}}},"IngestionRepoUri":{"id":"IngestionRepoUri","path":"SpatialEcrStack/IngestionRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"TransformationsDbtRepoUri":{"id":"TransformationsDbtRepoUri","path":"SpatialEcrStack/TransformationsDbtRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"DagsterRepoUri":{"id":"DagsterRepoUri","path":"SpatialEcrStack/DagsterRepoUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SpatialEcrStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"SpatialEcrStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.231.0"}}}},"Exports":{"id":"Exports","path":"SpatialEcrStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"IngestionRepoDB552C94\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"IngestionRepoDB552C94\",\"Arn\"]}","path":"SpatialEcrStack/Exports/Output{\"Fn::GetAtt\":[\"IngestionRepoDB552C94\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Fn::GetAtt\":[\"TransformationsDbtRepoAA3DFE61\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"TransformationsDbtRepoAA3DFE61\",\"Arn\"]}","path":"SpatialEcrStack/Exports/Output{\"Fn::GetAtt\":[\"TransformationsDbtRepoAA3DFE61\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Ref\":\"IngestionRepoDB552C94\"}":{"id":"Output{\"Ref\":\"IngestionRepoDB552C94\"}","path":"SpatialEcrStack/Exports/Output{\"Ref\":\"IngestionRepoDB552C94\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Ref\":\"TransformationsDbtRepoAA3DFE61\"}":{"id":"Output{\"Ref\":\"TransformationsDbtRepoAA3DFE61\"}","path":"SpatialEcrStack/Exports/Output{\"Ref\":\"TransformationsDbtRepoAA3DFE61\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Fn::GetAtt\":[\"DagsterRepo9E601850\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"DagsterRepo9E601850\",\"Arn\"]}","path":"SpatialEcrStack/Exports/Output{\"Fn::GetAtt\":[\"DagsterRepo9E601850\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Ref\":\"DagsterRepo9E601850\"}":{"id":"Output{\"Ref\":\"DagsterRepo9E601850\"}","path":"SpatialEcrStack/Exports/Output{\"Ref\":\"DagsterRepo9E601850\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SpatialEcrStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.231.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SpatialEcrStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.231.0"}}}},"SpatialDsqlStack":{"id":"SpatialDsqlStack","path":"SpatialDsqlStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.231.0"},"children":{"DsqlCluster":{"id":"DsqlCluster","path":"SpatialDsqlStack/DsqlCluster","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.231.0"}},"DsqlClusterEndpoint":{"id":"DsqlClusterEndpoint","path":"SpatialDsqlStack/DsqlClusterEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"DsqlClusterArn":{"id":"DsqlClusterArn","path":"SpatialDsqlStack/DsqlClusterArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"DsqlConnectionStringTemplate":{"id":"DsqlConnectionStringTemplate","path":"SpatialDsqlStack/DsqlConnectionStringTemplate","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SpatialDsqlStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"SpatialDsqlStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.231.0"}}}},"Exports":{"id":"Exports","path":"SpatialDsqlStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"DsqlCluster\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"DsqlCluster\",\"Arn\"]}","path":"SpatialDsqlStack/Exports/Output{\"Fn::GetAtt\":[\"DsqlCluster\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Fn::GetAtt\":[\"DsqlCluster\",\"Endpoint\"]}":{"id":"Output{\"Fn::GetAtt\":[\"DsqlCluster\",\"Endpoint\"]}","path":"SpatialDsqlStack/Exports/Output{\"Fn::GetAtt\":[\"DsqlCluster\",\"Endpoint\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SpatialDsqlStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.231.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SpatialDsqlStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.231.0"}}}},"SpatialEcsTasksStack":{"id":"SpatialEcsTasksStack","path":"SpatialEcsTasksStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.231.0"},"children":{"SpatialVpc":{"id":"SpatialVpc","path":"SpatialEcsTasksStack/SpatialVpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/SpatialVpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"SpatialEcsTasksStack/SpatialVpc"}]}}},"publicSubnet1":{"id":"publicSubnet1","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.231.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1"}],"vpcId":{"Ref":"SpatialVpc8D47CAA8"}}}},"Acl":{"id":"Acl","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.231.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1"}],"vpcId":{"Ref":"SpatialVpc8D47CAA8"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SpatialVpcpublicSubnet1RouteTable99DC7044"},"subnetId":{"Ref":"SpatialVpcpublicSubnet1Subnet6DBC2CD0"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SpatialVpcIGW9D08D19B"},"routeTableId":{"Ref":"SpatialVpcpublicSubnet1RouteTable99DC7044"}}}}}},"publicSubnet2":{"id":"publicSubnet2","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.231.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2"}],"vpcId":{"Ref":"SpatialVpc8D47CAA8"}}}},"Acl":{"id":"Acl","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.231.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2"}],"vpcId":{"Ref":"SpatialVpc8D47CAA8"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"SpatialVpcpublicSubnet2RouteTable0DBABA4D"},"subnetId":{"Ref":"SpatialVpcpublicSubnet2Subnet97374BD1"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"SpatialEcsTasksStack/SpatialVpc/publicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"SpatialVpcIGW9D08D19B"},"routeTableId":{"Ref":"SpatialVpcpublicSubnet2RouteTable0DBABA4D"}}}}}},"IGW":{"id":"IGW","path":"SpatialEcsTasksStack/SpatialVpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SpatialEcsTasksStack/SpatialVpc"}]}}},"VPCGW":{"id":"VPCGW","path":"SpatialEcsTasksStack/SpatialVpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"SpatialVpcIGW9D08D19B"},"vpcId":{"Ref":"SpatialVpc8D47CAA8"}}}}}},"TasksSecurityGroup":{"id":"TasksSecurityGroup","path":"SpatialEcsTasksStack/TasksSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/TasksSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for ECS worker tasks","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"SpatialVpc8D47CAA8"}}}}}},"SpatialCluster":{"id":"SpatialCluster","path":"SpatialEcsTasksStack/SpatialCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/SpatialCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"spatial-cluster","clusterSettings":[{"name":"containerInsights","value":"disabled"}]}}},"SpatialCluster":{"id":"SpatialCluster","path":"SpatialEcsTasksStack/SpatialCluster/SpatialCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnClusterCapacityProviderAssociations","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::ClusterCapacityProviderAssociations","aws:cdk:cloudformation:props":{"capacityProviders":["FARGATE","FARGATE_SPOT"],"cluster":{"Ref":"SpatialCluster03AB29BD"},"defaultCapacityProviderStrategy":[]}}}}},"SpatialSecrets":{"id":"SpatialSecrets","path":"SpatialEcsTasksStack/SpatialSecrets","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/SpatialSecrets/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Secrets for spatial data pipeline","name":"spatial/secrets","secretString":"{\"MOTHERDUCK_ACCESS_TOKEN\":\"PLACEHOLDER_REPLACE_ME\",\"DATABASE_NAME\":\"spatial_dagster\"}"}}}}},"TaskExecutionRole":{"id":"TaskExecutionRole","path":"SpatialEcsTasksStack/TaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.231.0","metadata":[]},"children":{"ImportTaskExecutionRole":{"id":"ImportTaskExecutionRole","path":"SpatialEcsTasksStack/TaskExecutionRole/ImportTaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.231.0","metadata":[]}},"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/TaskExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SpatialEcsTasksStack/TaskExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/TaskExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"Effect":"Allow","Resource":{"Ref":"SpatialSecretsA8EC01B8"}},{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttIngestionRepoDB552C94ArnD5B926B2"}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TasksLogGroup58372823","Arn"]}},{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttTransformationsDbtRepoAA3DFE61ArnBD9E7965"}}],"Version":"2012-10-17"},"policyName":"TaskExecutionRoleDefaultPolicyA84DD1B0","roles":[{"Ref":"TaskExecutionRole250D2532"}]}}}}}}},"TaskRole":{"id":"TaskRole","path":"SpatialEcsTasksStack/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.231.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"SpatialEcsTasksStack/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.231.0","metadata":[]}},"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SpatialEcsTasksStack/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"Effect":"Allow","Resource":{"Ref":"SpatialSecretsA8EC01B8"}}],"Version":"2012-10-17"},"policyName":"TaskRoleDefaultPolicy07FC53DE","roles":[{"Ref":"TaskRole30FC0FBB"}]}}}}}}},"TasksLogGroup":{"id":"TasksLogGroup","path":"SpatialEcsTasksStack/TasksLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/TasksLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/spatial-tasks","retentionInDays":7}}}}},"IngestionTaskDef":{"id":"IngestionTaskDef","path":"SpatialEcsTasksStack/IngestionTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/IngestionTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttIngestionRepoDB552C94ArnD5B926B2"}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttIngestionRepoDB552C94ArnD5B926B2"}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputRefIngestionRepoDB552C9484E75770"},":latest"]]},"name":"container","logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"TasksLogGroup58372823"},"awslogs-stream-prefix":"ingestion","awslogs-region":"us-east-1"}},"secrets":[{"name":"MOTHERDUCK_ACCESS_TOKEN","valueFrom":{"Fn::Join":["",[{"Ref":"SpatialSecretsA8EC01B8"},":MOTHERDUCK_ACCESS_TOKEN::"]]}},{"name":"DATABASE_NAME","valueFrom":{"Fn::Join":["",[{"Ref":"SpatialSecretsA8EC01B8"},":DATABASE_NAME::"]]}}]}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["TaskExecutionRole250D2532","Arn"]},"family":"spatial-ingestion","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["TaskRole30FC0FBB","Arn"]}}}},"ingestion":{"id":"ingestion","path":"SpatialEcsTasksStack/IngestionTaskDef/ingestion","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.231.0"}}}},"TransformationsDbtTaskDef":{"id":"TransformationsDbtTaskDef","path":"SpatialEcsTasksStack/TransformationsDbtTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialEcsTasksStack/TransformationsDbtTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttTransformationsDbtRepoAA3DFE61ArnBD9E7965"}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttTransformationsDbtRepoAA3DFE61ArnBD9E7965"}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputRefTransformationsDbtRepoAA3DFE61D30F99E2"},":latest"]]},"name":"container","logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"TasksLogGroup58372823"},"awslogs-stream-prefix":"transformations-dbt","awslogs-region":"us-east-1"}},"secrets":[{"name":"MOTHERDUCK_ACCESS_TOKEN","valueFrom":{"Fn::Join":["",[{"Ref":"SpatialSecretsA8EC01B8"},":MOTHERDUCK_ACCESS_TOKEN::"]]}},{"name":"DATABASE_NAME","valueFrom":{"Fn::Join":["",[{"Ref":"SpatialSecretsA8EC01B8"},":DATABASE_NAME::"]]}}]}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["TaskExecutionRole250D2532","Arn"]},"family":"spatial-transformations-dbt","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"LINUX"},"taskRoleArn":{"Fn::GetAtt":["TaskRole30FC0FBB","Arn"]}}}},"transformations-dbt":{"id":"transformations-dbt","path":"SpatialEcsTasksStack/TransformationsDbtTaskDef/transformations-dbt","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.231.0"}}}},"ClusterName":{"id":"ClusterName","path":"SpatialEcsTasksStack/ClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"ClusterArn":{"id":"ClusterArn","path":"SpatialEcsTasksStack/ClusterArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"IngestionTaskDefArn":{"id":"IngestionTaskDefArn","path":"SpatialEcsTasksStack/IngestionTaskDefArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"TransformationsDbtTaskDefArn":{"id":"TransformationsDbtTaskDefArn","path":"SpatialEcsTasksStack/TransformationsDbtTaskDefArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"VpcId":{"id":"VpcId","path":"SpatialEcsTasksStack/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"PublicSubnets":{"id":"PublicSubnets","path":"SpatialEcsTasksStack/PublicSubnets","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"SecurityGroupId":{"id":"SecurityGroupId","path":"SpatialEcsTasksStack/SecurityGroupId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"SecretsArn":{"id":"SecretsArn","path":"SpatialEcsTasksStack/SecretsArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SpatialEcsTasksStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"SpatialEcsTasksStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.231.0"}}}},"Exports":{"id":"Exports","path":"SpatialEcsTasksStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"IngestionTaskDef0CBA300A\"}":{"id":"Output{\"Ref\":\"IngestionTaskDef0CBA300A\"}","path":"SpatialEcsTasksStack/Exports/Output{\"Ref\":\"IngestionTaskDef0CBA300A\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Ref\":\"TransformationsDbtTaskDefC9EC8EF4\"}":{"id":"Output{\"Ref\":\"TransformationsDbtTaskDefC9EC8EF4\"}","path":"SpatialEcsTasksStack/Exports/Output{\"Ref\":\"TransformationsDbtTaskDefC9EC8EF4\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Ref\":\"SpatialCluster03AB29BD\"}":{"id":"Output{\"Ref\":\"SpatialCluster03AB29BD\"}","path":"SpatialEcsTasksStack/Exports/Output{\"Ref\":\"SpatialCluster03AB29BD\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Fn::GetAtt\":[\"TaskExecutionRole250D2532\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"TaskExecutionRole250D2532\",\"Arn\"]}","path":"SpatialEcsTasksStack/Exports/Output{\"Fn::GetAtt\":[\"TaskExecutionRole250D2532\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Fn::GetAtt\":[\"TaskRole30FC0FBB\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"TaskRole30FC0FBB\",\"Arn\"]}","path":"SpatialEcsTasksStack/Exports/Output{\"Fn::GetAtt\":[\"TaskRole30FC0FBB\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Ref\":\"SpatialVpcpublicSubnet1Subnet6DBC2CD0\"}":{"id":"Output{\"Ref\":\"SpatialVpcpublicSubnet1Subnet6DBC2CD0\"}","path":"SpatialEcsTasksStack/Exports/Output{\"Ref\":\"SpatialVpcpublicSubnet1Subnet6DBC2CD0\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"Output{\"Ref\":\"SpatialVpcpublicSubnet2Subnet97374BD1\"}":{"id":"Output{\"Ref\":\"SpatialVpcpublicSubnet2Subnet97374BD1\"}","path":"SpatialEcsTasksStack/Exports/Output{\"Ref\":\"SpatialVpcpublicSubnet2Subnet97374BD1\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SpatialEcsTasksStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.231.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SpatialEcsTasksStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.231.0"}}}},"SpatialDagsterStack":{"id":"SpatialDagsterStack","path":"SpatialDagsterStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.231.0"},"children":{"DagsterSecrets":{"id":"DagsterSecrets","path":"SpatialDagsterStack/DagsterSecrets","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialDagsterStack/DagsterSecrets/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Secrets for Dagster UI","name":"spatial/dagster-secrets","secretString":"{\"BASIC_AUTH_USERNAME\":\"admin\",\"BASIC_AUTH_PASSWORD\":\"CHANGE_ME_SECURE_PASSWORD\",\"MOTHERDUCK_ACCESS_TOKEN\":\"PLACEHOLDER_REPLACE_ME\",\"DATABASE_NAME\":\"spatial_dagster\"}"}}}}},"AppRunnerAccessRole":{"id":"AppRunnerAccessRole","path":"SpatialDagsterStack/AppRunnerAccessRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.231.0","metadata":[]},"children":{"ImportAppRunnerAccessRole":{"id":"ImportAppRunnerAccessRole","path":"SpatialDagsterStack/AppRunnerAccessRole/ImportAppRunnerAccessRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.231.0","metadata":[]}},"Resource":{"id":"Resource","path":"SpatialDagsterStack/AppRunnerAccessRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"build.apprunner.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SpatialDagsterStack/AppRunnerAccessRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialDagsterStack/AppRunnerAccessRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttDagsterRepo9E601850ArnF772716F"}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AppRunnerAccessRoleDefaultPolicy4FF2CFAF","roles":[{"Ref":"AppRunnerAccessRoleC89E5843"}]}}}}}}},"AppRunnerInstanceRole":{"id":"AppRunnerInstanceRole","path":"SpatialDagsterStack/AppRunnerInstanceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.231.0","metadata":[]},"children":{"ImportAppRunnerInstanceRole":{"id":"ImportAppRunnerInstanceRole","path":"SpatialDagsterStack/AppRunnerInstanceRole/ImportAppRunnerInstanceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.231.0","metadata":[]}},"Resource":{"id":"Resource","path":"SpatialDagsterStack/AppRunnerInstanceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"tasks.apprunner.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SpatialDagsterStack/AppRunnerInstanceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.231.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SpatialDagsterStack/AppRunnerInstanceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:GetSecretValue","secretsmanager:DescribeSecret"],"Effect":"Allow","Resource":{"Ref":"DagsterSecrets980EA1FD"}},{"Action":["ecs:RunTask","ecs:DescribeTasks","ecs:StopTask"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefIngestionTaskDef0CBA300A4A546BD8"},{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefTransformationsDbtTaskDefC9EC8EF465B38812"},{"Fn::Join":["",["arn:aws:ecs:us-east-1:",{"Ref":"AWS::AccountId"},":task/",{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefSpatialCluster03AB29BD176BCA81"},"/*"]]}]},{"Action":"iam:PassRole","Effect":"Allow","Resource":[{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputFnGetAttTaskExecutionRole250D2532Arn61CC7A98"},{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputFnGetAttTaskRole30FC0FBBArn85EA3C60"}]},{"Action":["dsql:DbConnect","dsql:DbConnectAdmin"],"Effect":"Allow","Resource":{"Fn::ImportValue":"SpatialDsqlStack:ExportsOutputFnGetAttDsqlClusterArnC66D17AD"}},{"Action":["logs:GetLogEvents","logs:FilterLogEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AppRunnerInstanceRoleDefaultPolicy35195718","roles":[{"Ref":"AppRunnerInstanceRole96A5A063"}]}}}}}}},"DagsterAutoScaling":{"id":"DagsterAutoScaling","path":"SpatialDagsterStack/DagsterAutoScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_apprunner.CfnAutoScalingConfiguration","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppRunner::AutoScalingConfiguration","aws:cdk:cloudformation:props":{"autoScalingConfigurationName":"spatial-dagster-autoscaling","maxConcurrency":100,"maxSize":1,"minSize":0}}},"DagsterService":{"id":"DagsterService","path":"SpatialDagsterStack/DagsterService","constructInfo":{"fqn":"aws-cdk-lib.aws_apprunner.CfnService","version":"2.231.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppRunner::Service","aws:cdk:cloudformation:props":{"autoScalingConfigurationArn":{"Fn::GetAtt":["DagsterAutoScaling","AutoScalingConfigurationArn"]},"healthCheckConfiguration":{"protocol":"HTTP","path":"/health","interval":20,"timeout":10,"healthyThreshold":1,"unhealthyThreshold":5},"instanceConfiguration":{"cpu":"1024","memory":"2048","instanceRoleArn":{"Fn::GetAtt":["AppRunnerInstanceRole96A5A063","Arn"]}},"serviceName":"spatial-dagster","sourceConfiguration":{"authenticationConfiguration":{"accessRoleArn":{"Fn::GetAtt":["AppRunnerAccessRoleC89E5843","Arn"]}},"autoDeploymentsEnabled":true,"imageRepository":{"imageRepositoryType":"ECR","imageIdentifier":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttDagsterRepo9E601850ArnF772716F"}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputFnGetAttDagsterRepo9E601850ArnF772716F"}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"SpatialEcrStack:ExportsOutputRefDagsterRepo9E6018503957BF94"},":latest"]]},"imageConfiguration":{"port":"8080","runtimeEnvironmentVariables":[{"name":"DAGSTER_ENVIRONMENT","value":"production"},{"name":"ECS_CLUSTER","value":{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefSpatialCluster03AB29BD176BCA81"}},{"name":"ECS_SUBNETS","value":{"Fn::Join":["",[{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefSpatialVpcpublicSubnet1Subnet6DBC2CD023542E16"},",",{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefSpatialVpcpublicSubnet2Subnet97374BD1B6F660ED"}]]}},{"name":"AWS_REGION","value":"us-east-1"},{"name":"USE_SECRETS_MANAGER","value":"true"},{"name":"SECRETS_MANAGER_SECRET_NAME","value":{"Fn::Join":["-",[{"Fn::Select":[0,{"Fn::Split":["-",{"Fn::Select":[6,{"Fn::Split":[":",{"Ref":"DagsterSecrets980EA1FD"}]}]}]}]},{"Fn::Select":[1,{"Fn::Split":["-",{"Fn::Select":[6,{"Fn::Split":[":",{"Ref":"DagsterSecrets980EA1FD"}]}]}]}]}]]}},{"name":"DSQL_CLUSTER_ENDPOINT","value":{"Fn::ImportValue":"SpatialDsqlStack:ExportsOutputFnGetAttDsqlClusterEndpoint46EA9E2D"}},{"name":"ECS_TASK_DEFINITIONS","value":{"Fn::Join":["",["ingestion=",{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefIngestionTaskDef0CBA300A4A546BD8"},",transformations_dbt=",{"Fn::ImportValue":"SpatialEcsTasksStack:ExportsOutputRefTransformationsDbtTaskDefC9EC8EF465B38812"}]]}},{"name":"USE_FARGATE_SPOT","value":"true"}],"runtimeEnvironmentSecrets":[{"name":"BASIC_AUTH_USERNAME","value":{"Fn::Join":["",[{"Ref":"DagsterSecrets980EA1FD"},":BASIC_AUTH_USERNAME::"]]}},{"name":"BASIC_AUTH_PASSWORD","value":{"Fn::Join":["",[{"Ref":"DagsterSecrets980EA1FD"},":BASIC_AUTH_PASSWORD::"]]}},{"name":"MOTHERDUCK_ACCESS_TOKEN","value":{"Fn::Join":["",[{"Ref":"DagsterSecrets980EA1FD"},":MOTHERDUCK_ACCESS_TOKEN::"]]}}]}}}}}},"DagsterServiceUrl":{"id":"DagsterServiceUrl","path":"SpatialDagsterStack/DagsterServiceUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"DagsterSecretsArn":{"id":"DagsterSecretsArn","path":"SpatialDagsterStack/DagsterSecretsArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.231.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SpatialDagsterStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"SpatialDagsterStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.231.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SpatialDagsterStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.231.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SpatialDagsterStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.231.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}